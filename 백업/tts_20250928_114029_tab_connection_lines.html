<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Primary Colors */
            --primary-blue: #6b7280;
            --primary-purple: #4b5563;
            --primary-gradient: linear-gradient(135deg, #6b7280, #4b5563);
            
            /* Status Colors */
            --success: #48bb78;
            --warning: #ed8936;
            --error: #f56565;
            --info: #6b7280;
            
            /* Neutral Colors */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Text Colors */
            --text-primary: #1a202c;
            --text-secondary: rgba(26, 32, 44, 0.7);
            --text-tertiary: rgba(26, 32, 44, 0.5);
            
            /* Background Colors */
            --bg-primary: #ffffff;
            --bg-secondary: rgba(255, 255, 255, 0.8);
            --bg-overlay: rgba(255, 255, 255, 0.1);
            --bg-sidebar: rgba(255, 255, 255, 0.95);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 20px;
            --space-2xl: 24px;
            --space-3xl: 32px;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);
            
            /* Border Radius */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 20px;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-xl);
            transition: transform var(--transition-normal);
            z-index: 1000;
            position: relative;
        }

        .sidebar-header {
            padding: var(--space-2xl);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .sidebar-nav {
            padding: var(--space-lg) 0;
        }

        .nav-section {
            margin-bottom: var(--space-2xl);
        }

        .nav-section-title {
            padding: var(--space-sm) var(--space-2xl);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-500);
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: var(--space-md) var(--space-2xl);
            color: var(--text-secondary);
            text-decoration: none;
            transition: all var(--transition-fast);
            position: relative;
            margin: 0 var(--space-lg);
            border-radius: var(--radius-lg);
        }

        .nav-item:hover {
            background: var(--gray-100);
            color: var(--primary-blue);
        }

        .nav-item.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            padding: var(--space-md) var(--space-3xl);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--text-secondary);
            font-size: 14px;
        }

        .breadcrumb-separator {
            color: var(--gray-400);
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: white;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .action-btn:hover {
            background: var(--gray-100);
            transform: translateY(-1px);
        }

        .user-avatar {
            color: #6b7280;
            font-weight: 600;
            cursor: pointer;
            transition: color var(--transition-fast);
            white-space: nowrap;
            font-size: 14px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: var(--space-md);
            overflow-y: auto;
        }

        /* Workflow Section */
        .workflow-section {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-sm) var(--space-2xl);
            margin-bottom: var(--space-md);
            box-shadow: var(--shadow-md);
        }

        .workflow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .workflow-title-container {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .workflow-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .workflow-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .workflow-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            line-height: 1.2;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: white;
            color: var(--text-primary);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
            transform: translateY(-1px);
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
            transform: translateY(-1px);
        }

        /* Circular Tabs */
        .tab-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: var(--space-lg);
            padding: var(--space-sm) 0;
        }

        .tab-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gray-200);
            transform: translateY(-50%);
            z-index: 1;
        }

        .tab-fill {
            height: 100%;
            background: var(--primary-gradient);
            width: 0%;
            transition: width 0.8s ease;
            border-radius: 1px;
        }

        /* 탭 간 연결 라인 스타일 */
        .tab-connection-line {
            position: absolute;
            top: 50%;
            height: 3px;
            background: var(--primary-gradient);
            transform: translateY(-50%);
            z-index: 2;
            border-radius: 2px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tab-connection-line.active {
            opacity: 1;
        }

        /* 각 탭별 연결 라인 색상 */
        .tab-connection-line.services-to-speakers {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }

        .tab-connection-line.services-to-channels {
            background: linear-gradient(90deg, #3b82f6, #f59e0b);
        }

        .tab-connection-line.services-to-servers {
            background: linear-gradient(90deg, #3b82f6, #ef4444);
        }

        .tab-connection-line.speakers-to-services {
            background: linear-gradient(90deg, #8b5cf6, #3b82f6);
        }

        .tab-connection-line.speakers-to-channels {
            background: linear-gradient(90deg, #8b5cf6, #f59e0b);
        }

        .tab-connection-line.speakers-to-servers {
            background: linear-gradient(90deg, #8b5cf6, #ef4444);
        }

        .tab-connection-line.channels-to-services {
            background: linear-gradient(90deg, #f59e0b, #3b82f6);
        }

        .tab-connection-line.channels-to-speakers {
            background: linear-gradient(90deg, #f59e0b, #8b5cf6);
        }

        .tab-connection-line.channels-to-servers {
            background: linear-gradient(90deg, #f59e0b, #ef4444);
        }

        .tab-connection-line.servers-to-services {
            background: linear-gradient(90deg, #ef4444, #3b82f6);
        }

        .tab-connection-line.servers-to-speakers {
            background: linear-gradient(90deg, #ef4444, #8b5cf6);
        }

        .tab-connection-line.servers-to-channels {
            background: linear-gradient(90deg, #ef4444, #f59e0b);
        }

        /* 선택된 테이블 행 스타일 */
        .data-table tbody tr.selected {
            background-color: #e3f2fd !important;
            border-left: 4px solid #2196f3;
        }

        .data-table tbody tr:hover {
            background-color: #f5f5f5;
        }

        .tab-step {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
        }

        .tab-circle {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .tab-circle.completed {
            background: var(--success);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .tab-circle.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-lg);
            animation: pulse 2s infinite;
            border-color: rgba(107, 114, 128, 0.3);
        }

        .tab-circle.pending {
            background: white;
            color: var(--gray-400);
            border: 2px solid var(--gray-200);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .tab-info {
            text-align: center;
            min-width: 100px;
        }

        .tab-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .tab-status {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-top: 2px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
        }

        /* 탭별 최대 너비 설정 */
        #services-status {
            max-width: 120px; /* 서비스명: 20자 */
        }

        #speakers-status {
            max-width: 150px; /* 스피커 코드들: 25자 */
        }

        #channels-status {
            max-width: 150px; /* 채널명들: 25자 */
        }

        #servers-status {
            max-width: 180px; /* 서버명들: 30자 */
        }

        .tab-status.completed {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .tab-status.active {
            background: rgba(107, 114, 128, 0.1);
            color: var(--primary-blue);
        }

        .tab-status.pending {
            background: var(--gray-100);
            color: var(--gray-500);
        }

        /* Tab Actions */
        .tab-actions {
            display: flex;
            justify-content: flex-end;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        /* Deploy Modal Styles */
        .deploy-section {
            margin-bottom: var(--space-2xl);
            padding: var(--space-lg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            background: var(--gray-50);
        }

        .deploy-section h4 {
            margin: 0 0 var(--space-lg) 0;
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .deploy-items {
            display: grid;
            gap: var(--space-md);
            max-height: 200px;
            overflow-y: auto;
            padding: var(--space-md);
            background: white;
            border-radius: var(--radius-md);
        }

        .deploy-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            background: white;
            transition: all 0.2s ease;
        }

        .deploy-item:hover {
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .deploy-item.selected {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .deploy-item-info {
            flex: 1;
        }

        .deploy-item-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .deploy-item-details {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .deploy-item-status {
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 500;
        }

        .deploy-item-status.ready {
            background: var(--success-light);
            color: var(--success);
        }

        .deploy-item-status.deployed {
            background: var(--info-light);
            color: var(--info);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: var(--space-3xl);
            padding: var(--space-2xl);
            background: var(--gray-50);
            border-radius: var(--radius-xl);
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 15px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--gray-300);
            z-index: 1;
        }

        .step.completed:not(:last-child)::after {
            background: var(--success);
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gray-300);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: var(--space-sm);
            position: relative;
            z-index: 2;
        }

        .step.active .step-circle {
            background: var(--primary);
        }

        .step.completed .step-circle {
            background: var(--success);
        }

        .step-label {
            font-size: 12px;
            color: var(--text-muted);
            text-align: center;
        }

        .step.active .step-label {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Wizard Steps */
        .wizard-step {
            display: block;
        }

        /* Stats Row */
        .stats-row {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-lg) var(--space-2xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-2xl);
        }

        .stats-label {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .stats-items {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
            flex-wrap: wrap;
        }

        .stats-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .stats-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .stats-icon.success {
            background: var(--success);
        }

        .stats-icon.warning {
            background: var(--warning);
        }

        .stats-icon.error {
            background: var(--error);
        }

        .stats-icon.info {
            background: var(--info);
        }

        .stats-text {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .stats-text span {
            font-weight: 600;
        }

        .stats-text:hover {
            white-space: normal;
            overflow: visible;
            position: relative;
            z-index: 10;
            background: white;
            padding: 4px 8px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        /* Table Actions */
        .table-actions {
            display: flex;
            justify-content: flex-start;
            gap: var(--space-md);
            padding: var(--space-lg) var(--space-xl);
            border-top: 1px solid var(--gray-200);
        }

        /* Content Card */
        .content-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-3xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-lg);
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-2xl);
        }

        .content-title-container {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .content-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .content-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .content-actions {
            display: flex;
            gap: var(--space-sm);
        }

        /* Search Section */
        .search-section {
            display: flex;
            gap: var(--space-md);
            align-items: center;
            margin-bottom: var(--space-2xl);
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 14px;
            transition: border-color var(--transition-fast);
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        /* Data Table */
        .table-container {
            background: white;
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--gray-50);
            padding: var(--space-lg) var(--space-xl);
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-primary);
            border-bottom: 1px solid var(--gray-200);
        }

        .data-table td {
            padding: var(--space-lg) var(--space-xl);
            border-bottom: 1px solid var(--gray-100);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .data-table tr:hover {
            background: var(--gray-50);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        /* Status Badge */
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .status-inactive {
            background: rgba(245, 101, 101, 0.1);
            color: var(--error);
        }

        .status-pending {
            background: rgba(237, 137, 54, 0.1);
            color: var(--warning);
        }

        .status-online {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .status-offline {
            background: rgba(156, 163, 175, 0.1);
            color: var(--gray-500);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: var(--space-sm);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: var(--space-2xl);
            gap: var(--space-sm);
        }

        .page-btn {
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--gray-300);
            background: white;
            cursor: pointer;
            border-radius: var(--radius-md);
            font-size: 14px;
            transition: all var(--transition-fast);
            color: var(--text-secondary);
        }

        .page-btn:hover {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .page-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 600px;
            box-shadow: var(--shadow-2xl);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: var(--primary-gradient);
            color: white;
            padding: var(--space-2xl) var(--space-3xl);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title-container {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            margin: 0;
        }

        .modal-subtitle {
            margin: 0;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background var(--transition-fast);
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
        }

        .modal-body {
            padding: var(--space-3xl);
        }

        .form-group {
            margin-bottom: var(--space-xl);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-sm);
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .required {
            color: var(--error);
        }

        .radio-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .radio-label input[type="radio"] {
            margin: 0;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .checkbox-label input[type="checkbox"] {
            margin: 0;
        }

        .form-control {
            width: 100%;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 14px;
            transition: border-color var(--transition-fast);
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .form-select {
            width: 100%;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .modal-footer {
            padding: var(--space-xl) var(--space-3xl);
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: var(--space-md);
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: var(--space-3xl);
            color: var(--text-secondary);
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid var(--gray-200);
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-lg);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                height: 100vh;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                width: 100%;
            }

            .header {
                padding: var(--space-md) var(--space-lg);
            }

            .content-area {
                padding: var(--space-md);
            }

            .workflow-section {
                padding: var(--space-lg);
            }

            .content-card {
                padding: var(--space-lg);
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .search-section {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input {
                min-width: auto;
            }

            .data-table {
                font-size: 12px;
            }

            .data-table th,
            .data-table td {
                padding: var(--space-md);
            }
        }
    </style>
    <!-- D3.js 라이브러리 추가 -->
    <script src="d3.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">KT</div>
                    <div class="logo-text">AMP</div>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">시스템 관리</div>
                    <a href="#" class="nav-item active">
                        <div class="nav-icon"><i class="fas fa-database"></i></div>
                        기초데이터 관리
                    </a>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-users"></i></div>
                        사용자 관리
                    </a>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-cog"></i></div>
                        시스템 설정
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">모니터링</div>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
                        대시보드
                    </a>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-server"></i></div>
                        서버 모니터링
                    </a>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <span>시스템 관리</span>
                        <span class="breadcrumb-separator">/</span>
                        <span>기초데이터 관리</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <button class="action-btn">
                            <i class="fas fa-bell"></i>
                        </button>
                        <button class="action-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="user-avatar">관리자</div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Page Header -->
                <div class="workflow-section">
                    <div class="workflow-header">
                        <div class="workflow-title-container">
                            <div class="workflow-title">TTS 기초데이터 관리</div>
                            <div class="workflow-subtitle">서비스, 스피커, 채널, 서버 정보와 연결을 통합 관리합니다</div>
                        </div>
                        <div class="workflow-actions">
                            <button class="btn btn-primary" onclick="openConnectModal()">
                                <i class="fas fa-link"></i>
                                연결하기
                            </button>
                            <button class="btn btn-secondary" onclick="goToDetailView()">
                                <i class="fas fa-list-alt"></i>
                                연결상세보기
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tab Navigation -->
                    <div class="tab-navigation">
                        <div class="tab-line">
                            <div class="tab-fill" id="tabFill" style="width: 0%;"></div>
                        </div>
                        
                        <!-- 탭 간 연결 라인들 -->
                        <div class="tab-connection-line services-to-speakers" id="line-services-speakers"></div>
                        <div class="tab-connection-line services-to-channels" id="line-services-channels"></div>
                        <div class="tab-connection-line services-to-servers" id="line-services-servers"></div>
                        <div class="tab-connection-line speakers-to-services" id="line-speakers-services"></div>
                        <div class="tab-connection-line speakers-to-channels" id="line-speakers-channels"></div>
                        <div class="tab-connection-line speakers-to-servers" id="line-speakers-servers"></div>
                        <div class="tab-connection-line channels-to-services" id="line-channels-services"></div>
                        <div class="tab-connection-line channels-to-speakers" id="line-channels-speakers"></div>
                        <div class="tab-connection-line channels-to-servers" id="line-channels-servers"></div>
                        <div class="tab-connection-line servers-to-services" id="line-servers-services"></div>
                        <div class="tab-connection-line servers-to-speakers" id="line-servers-speakers"></div>
                        <div class="tab-connection-line servers-to-channels" id="line-servers-channels"></div>

                        <div class="tab-step" onclick="switchTab('services')">
                            <div class="tab-circle active" id="tab-services">
                                <i class="fas fa-cog"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">서비스 관리</div>
                                <div class="tab-status active" id="services-status">활성</div>
                            </div>
                        </div>
                        
                        <div class="tab-step" onclick="switchTab('speakers')">
                            <div class="tab-circle pending" id="tab-speakers">
                                <i class="fas fa-volume-up"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">스피커 관리</div>
                                <div class="tab-status pending" id="speakers-status">대기중</div>
                            </div>
                        </div>
                        
                        <div class="tab-step" onclick="switchTab('channels')">
                            <div class="tab-circle pending" id="tab-channels">
                                <i class="fas fa-broadcast-tower"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">채널 관리</div>
                                <div class="tab-status pending" id="channels-status">대기중</div>
                            </div>
                        </div>
                        
                        <div class="tab-step" onclick="switchTab('servers')">
                            <div class="tab-circle pending" id="tab-servers">
                                <i class="fas fa-server"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">서버 관리</div>
                                <div class="tab-status pending" id="servers-status">대기중</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Relationship Info Row (숨김 처리) -->
                <div class="stats-row" id="relationshipInfo" style="display: none;">
                    <span class="stats-label" id="relationshipLabel">선택된 항목:</span>
                    <div class="stats-items" id="relationshipItems">
                        <!-- 동적으로 생성됩니다 -->
                    </div>
                </div>

                <!-- Main Content Card -->
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title-container">
                            <div class="content-title">데이터 목록</div>
                            <div class="content-subtitle">등록된 서비스 목록을 확인하고 등록 할 수 있습니다.</div>
                        </div>
                    </div>

                    <!-- Tab Actions -->
                    <div class="tab-actions">
                        <button class="btn btn-success" id="detailRegisterBtn" onclick="openDetailModal()">
                            <i class="fas fa-plus-circle"></i>
                            <span id="detailRegisterText">서비스 등록</span>
                        </button>
                        <button class="btn btn-primary" id="deployBtn" onclick="openDeployModal()">
                            <i class="fas fa-rocket"></i>
                            <span id="deployBtnText">서비스 배포</span>
                        </button>
                    </div>

                    <!-- Search Section -->
                    <div class="search-section">
                        <input type="text" class="search-input" placeholder="검색어를 입력하세요..." id="globalSearch">
                        <button class="btn btn-primary" onclick="performSearch()">
                            <i class="fas fa-search"></i>
                            검색
                        </button>
                        <button class="btn btn-secondary" onclick="resetSearch()">
                            <i class="fas fa-refresh"></i>
                            초기화
                        </button>
                    </div>

                    <!-- Loading -->
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        데이터를 불러오는 중...
                    </div>

                    <!-- Data Table -->
                    <div class="table-container" id="tableContainer">
                        <table class="data-table" id="dataTable">
                            <thead id="tableHead">
                                <!-- 동적으로 생성 -->
                            </thead>
                            <tbody id="tableBody">
                                <!-- 동적으로 생성 -->
                            </tbody>
                        </table>
                        
                        <!-- Table Actions -->
                        <div class="table-actions">
                            <button class="btn btn-danger" onclick="deleteSelected()">
                                <i class="fas fa-trash"></i>
                                선택 삭제
                            </button>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="pagination">
                        <!-- 동적으로 생성 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Deploy Registration Modal -->
    <div id="quickDeployModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">빠른 배포등록</h3>
                <button class="close" onclick="closeQuickDeployModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Progress Steps -->
                <div class="progress-steps">
                    <div class="step active" id="quickStep1">
                        <div class="step-circle">1</div>
                        <div class="step-label">서비스 정보</div>
                    </div>
                    <div class="step" id="quickStep2">
                        <div class="step-circle">2</div>
                        <div class="step-label">서버 설정</div>
                    </div>
                    <div class="step" id="quickStep3">
                        <div class="step-circle">3</div>
                        <div class="step-label">배포 설정</div>
                    </div>
                    <div class="step" id="quickStep4">
                        <div class="step-circle">4</div>
                        <div class="step-label">완료</div>
                    </div>
                </div>

                <!-- Step 1: Service Information -->
                <div id="quickWizardStep1" class="wizard-step">
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> 기본 정보</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">서비스명 <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServiceName" placeholder="예: 고객상담 TTS">
                            </div>
                            <div class="form-group">
                                <label class="form-label">언어 설정 <span class="required">*</span></label>
                                <select class="form-select" id="quickServiceLanguage">
                                    <option value="">선택하세요</option>
                                    <option value="ko">한국어</option>
                                    <option value="en">영어</option>
                                    <option value="ja">일본어</option>
                                    <option value="zh">중국어</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">서비스 설명</label>
                            <textarea class="form-control form-textarea" id="quickServiceDescription" placeholder="서비스에 대한 간단한 설명을 입력하세요"></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-sliders-h"></i> TCS 서버 설정</h4>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickEnablePhrase" checked>
                                상용구 사용
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickEnableCache" checked>
                                캐시 사용
                            </label>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-music"></i> WAV 품질 설정</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Sample Rate <span class="required">*</span></label>
                                <select class="form-select" id="quickSampleRate">
                                    <option value="">선택하세요</option>
                                    <option value="16000">16 KHz</option>
                                    <option value="22050">22.05 KHz</option>
                                    <option value="24000">24 KHz</option>
                                    <option value="44100">44.1 KHz</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Bit Per Sample <span class="required">*</span></label>
                                <select class="form-select" id="quickBitPerSample">
                                    <option value="">선택하세요</option>
                                    <option value="8">8 Bit</option>
                                    <option value="16">16 Bit</option>
                                    <option value="24">24 Bit</option>
                                    <option value="32">32 Bit</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Channel <span class="required">*</span></label>
                                <select class="form-select" id="quickAudioChannel">
                                    <option value="">선택하세요</option>
                                    <option value="mono">Mono</option>
                                    <option value="stereo">Stereo</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Server Configuration -->
                <div id="quickWizardStep2" class="wizard-step" style="display: none;">
                    <div class="form-section">
                        <h4><i class="fas fa-server"></i> 전용 서버 생성</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">서버명 <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServerName" placeholder="자동 생성됨">
                            </div>
                            <div class="form-group">
                                <label class="form-label">서버 유형 <span class="required">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="quickServerType" value="TCS" checked>
                                        TCS (TTS 전용)
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">서버 ID <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServerId" placeholder="자동 생성됨">
                            </div>
                            <div class="form-group">
                                <label class="form-label">엔드포인트 <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServerEndpoint" value="localhost" placeholder="localhost">
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Port <span class="required">*</span></label>
                                <input type="number" class="form-control" id="quickServerPort" placeholder="자동 할당">
                            </div>
                            <div class="form-group">
                                <label class="form-label">최대 연결 수</label>
                                <input type="number" class="form-control" id="quickMaxConnections" value="100" min="1" max="1000">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickUseHttps">
                                HTTPS 사용 여부
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickUseServer" checked>
                                서버 사용 여부
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Deployment Configuration -->
                <div id="quickWizardStep3" class="wizard-step" style="display: none;">
                    <div class="form-section">
                        <h4><i class="fas fa-rocket"></i> 배포 설정</h4>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            서비스 생성과 동시에 전용 서버가 자동으로 생성되고 배포됩니다.
                        </div>
                    </div>
                </div>

                <!-- Step 4: Summary -->
                <div id="quickWizardStep4" class="wizard-step" style="display: none;">
                    <div class="form-section">
                        <h4><i class="fas fa-check-circle"></i> 생성 완료</h4>
                        <div id="quickCreationSummary">
                            <!-- Summary will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="quickPrevBtn" onclick="quickPreviousStep()" style="display: none;">이전</button>
                <button class="btn btn-secondary" onclick="closeQuickDeployModal()">취소</button>
                <button class="btn btn-primary" id="quickNextBtn" onclick="quickNextStep()">다음</button>
                <button class="btn btn-success" id="quickCreateBtn" onclick="quickCreateService()" style="display: none;">생성 및 배포</button>
            </div>
        </div>
    </div>

    <!-- Detail Modal (상세 등록) -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="detailModalTitle">서비스 등록</h3>
                <button class="close" onclick="closeDetailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="detailForm">
                    <div id="detailFields">
                        <!-- 동적으로 생성되는 상세 필드들 -->
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDetailModal()">취소</button>
                <button class="btn btn-success" onclick="saveDetailItem()">상세 저장</button>
            </div>
        </div>
    </div>

    <!-- Deploy Modal (배포) -->
    <div id="deployModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="deployModalTitle">TTS 서비스 배포 (패치)</h3>
                <button class="close" onclick="closeDeployModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="deploy-section">
                    <h4><i class="fas fa-list"></i> 배포할 TTS 서비스 선택</h4>
                    <div class="deploy-items" id="deployItems">
                        <!-- 동적으로 생성되는 배포 가능한 서비스들 -->
                    </div>
                </div>
                
                <div class="deploy-section">
                    <h4><i class="fas fa-cog"></i> 배포 설정</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">배포 환경 <span class="required">*</span></label>
                            <select class="form-select" id="deployEnvironment" required>
                                <option value="">선택하세요</option>
                                <option value="development">개발 환경</option>
                                <option value="staging">스테이징 환경</option>
                                <option value="production">운영 환경</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">패치 유형 <span class="required">*</span></label>
                            <select class="form-select" id="deployType" required>
                                <option value="">선택하세요</option>
                                <option value="immediate">즉시 패치</option>
                                <option value="scheduled">예약 패치</option>
                                <option value="rolling">순차 패치 (무중단)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">대상 TCS 서버</label>
                            <select class="form-select" id="deployTargetServer">
                                <option value="">자동 선택</option>
                                <option value="tcs01">TCS-01 (localhost:16791)</option>
                                <option value="tcs02">TCS-02 (localhost:16792)</option>
                                <option value="tcs03">TCS-03 (localhost:16793)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">인스턴스 수</label>
                            <input type="number" class="form-control" id="deployInstances" value="1" min="1" max="10">
                        </div>
                    </div>
                </div>
                
                <div class="deploy-section">
                    <h4><i class="fas fa-shield-alt"></i> 고급 옵션</h4>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="deployHealthCheck" checked>
                            헬스체크 활성화
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="deployRollback">
                            실패 시 자동 롤백
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="deployNotification" checked>
                            배포 완료 알림
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeployModal()">취소</button>
                <button class="btn btn-warning" onclick="validateDeployment()">
                    <i class="fas fa-check-circle"></i>
                    배포 검증
                </button>
                <button class="btn btn-primary" onclick="startDeployment()">
                    <i class="fas fa-rocket"></i>
                    패치 시작
                </button>
            </div>
        </div>
    </div>

    <!-- 서비스 연결 관리 모달 -->
    <div id="connectModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 95vw; max-height: 90vh; width: 1200px; height: 85vh;">
            <div class="modal-header">
                <div class="modal-title-container">
                    <h3 class="modal-title">
                        <i class="fas fa-link"></i>
                        서비스 연결 관리
                    </h3>
                    <p class="modal-subtitle">등록된 서비스와 스피커, 채널, 서버 간의 연결 관계를 관리합니다</p>
                </div>
                <button class="close" onclick="closeConnectModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 0; height: calc(100% - 120px); overflow: hidden;">
                <iframe id="connectionFrame" src="./amp-service-connection-management.html" 
                        style="width: 100%; height: 100%; border: none; border-radius: 0 0 12px 12px;">
                </iframe>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentTab = 'services';
        let currentPage = 1;
        let itemsPerPage = 10;
        let currentData = [];
        let selectedEntity = null; // 현재 선택된 엔티티
        let selectedEntityType = null; // 현재 선택된 엔티티 타입
        
        // 연결 데이터 (실제 구현에서는 서버에서 가져와야 함)
        let connectionData = {
            services: {
                'svc-1': { speakers: ['spk-1', 'spk-2'], channels: ['ch-1'], servers: ['srv-1'] },
                'svc-2': { speakers: ['spk-3'], channels: ['ch-2', 'ch-3'], servers: ['srv-2'] },
                'svc-3': { speakers: [], channels: [], servers: ['srv-3'] },
                'svc-4': { speakers: ['spk-4'], channels: [], servers: [] }
            },
            speakers: {
                'spk-1': { services: ['svc-1'], channels: [], servers: [] },
                'spk-2': { services: ['svc-1'], channels: ['ch-1'], servers: [] },
                'spk-3': { services: ['svc-2'], channels: ['ch-2'], servers: [] },
                'spk-4': { services: ['svc-4'], channels: [], servers: [] }
            },
            channels: {
                'ch-1': { services: ['svc-1'], speakers: ['spk-2'], servers: [] },
                'ch-2': { services: ['svc-2'], speakers: ['spk-3'], servers: ['srv-2'] },
                'ch-3': { services: ['svc-2'], speakers: [], servers: [] }
            },
            servers: {
                'srv-1': { services: ['svc-1'], speakers: [], channels: [] },
                'srv-2': { services: ['svc-2'], speakers: [], channels: ['ch-2'] },
                'srv-3': { services: ['svc-3'], speakers: [], channels: [] }
            }
        };

        // 샘플 데이터
        const sampleData = {
            services: [
                { no: 4, name: '정제스트3', language: '한국어', deployStatus: '배포완료', connectedItems: '스피커:0 채널:0 서버:1', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-28 10:30:02', updateDate: '2025-08-28 10:30:02' },
                { no: 3, name: '정제스트2', language: '한국어', deployStatus: '배포대기', connectedItems: '스피커:0 채널:0 서버:0', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-28 10:29:47', updateDate: '2025-08-28 10:29:47' },
                { no: 2, name: '정제스트', language: '한국어', deployStatus: '배포완료', connectedItems: '스피커:1 채널:2 서버:6', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-28 09:37:07', updateDate: '2025-08-28 09:37:07' },
                { no: 1, name: '테스트서비스', language: '한국어', deployStatus: '배포완료', connectedItems: '스피커:1 채널:0 서버:1', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-22 14:14:28', updateDate: '2025-08-22 14:14:28' }
            ],
            speakers: [
                { no: 2, speakerType: '기본', speakerCode: '432', speakerId: '3002', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '-', useAdmin: '-', regDate: '2025-08-31 17:45:17', updateDate: '-' },
                { no: 1, speakerType: '기본', speakerCode: '다솜힘을', speakerId: '3001', service: '테스트서비스', language: '한국어', version: '배포완료', systemAdmin: '-', useAdmin: '-', regDate: '2025-08-22 15:31:06', updateDate: '-' }
            ],
            channels: [
                { no: 2, channelName: '12', channelId: '123', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-09-01 09:55:58', updateDate: '2025-09-01 09:55:58' },
                { no: 1, channelName: '11', channelId: '11', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-08-28 09:42:06', updateDate: '2025-08-28 09:42:06' }
            ],
            servers: [
                { no: 8, serverName: '2', serverId: '222', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '3443', serverPort: '3002', useStatus: 'Y', regDate: '2025-09-01 09:56:33', updateDate: '2025-09-01 09:56:33' },
                { no: 7, serverName: '정제스트2', serverId: '4324', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '32', serverPort: '322', useStatus: 'Y', regDate: '2025-08-31 17:31:16', updateDate: '2025-08-31 17:31:16' },
                { no: 6, serverName: '정제스트서버', serverId: 'JUN', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '3443', serverPort: '2001', useStatus: 'Y', regDate: '2025-08-31 17:30:08', updateDate: '2025-08-31 17:30:08' },
                { no: 5, serverName: '11', serverId: '000', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: 'gk', serverPort: '666', useStatus: 'Y', regDate: '2025-08-28 11:12:26', updateDate: '2025-08-28 11:27:08' },
                { no: 4, serverName: '111', serverId: '4334', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '333', serverPort: '21', useStatus: 'Y', regDate: '2025-08-28 10:33:09', updateDate: '2025-08-28 10:33:09' },
                { no: 3, serverName: '555', serverId: '432', service: '정제스트3', language: '한국어', serverType: 'TCS', endpoint: '3443', serverPort: '323', useStatus: 'Y', regDate: '2025-08-28 10:32:09', updateDate: '2025-08-28 11:14:28' },
                { no: 2, serverName: '정제서버', serverId: 'jjj', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: 'gk', serverPort: '3001', useStatus: 'Y', regDate: '2025-08-28 09:39:33', updateDate: '2025-08-28 09:39:33' },
                { no: 1, serverName: '서버1', serverId: 'tcs01', service: '테스트서비스', language: '한국어', serverType: 'TCS', endpoint: 'localhost', serverPort: '16791', useStatus: 'Y', regDate: '2025-08-22 14:14:54', updateDate: '2025-08-22 14:54:15' }
            ]
        };

        // 테이블 컬럼 정의
        const tableColumns = {
            services: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'name', label: '서비스명' },
                { key: 'language', label: '언어' },
                { key: 'deployStatus', label: '배포 상태' },
                { key: 'connectedItems', label: '연결 항목' },
                { key: 'sampleRate', label: 'SampleRate' },
                { key: 'bitPerSample', label: 'BitPerSample' },
                { key: 'channel', label: 'Channel' },
                { key: 'phraseUse', label: '상용구 사용' },
                { key: 'cacheUse', label: '캐시 사용' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' }
            ],
            speakers: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'speakerType', label: '스피커 타입' },
                { key: 'speakerCode', label: '스피커 코드' },
                { key: 'speakerId', label: '스피커 관리 ID' },
                { key: 'service', label: '사용 서비스' },
                { key: 'language', label: '언어' },
                { key: 'version', label: '버전상태' },
                { key: 'systemAdmin', label: '스피커 사용 시작일자' },
                { key: 'useAdmin', label: '스피커 사용 종료일자' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' }
            ],
            channels: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'channelName', label: '채널명' },
                { key: 'channelId', label: '채널 관리 ID' },
                { key: 'service', label: '서비스' },
                { key: 'language', label: '언어' },
                { key: 'statsExposure', label: '요청통계 노출 여부' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' }
            ],
            servers: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'serverName', label: '서버명' },
                { key: 'serverId', label: '서버 ID' },
                { key: 'service', label: '서비스' },
                { key: 'language', label: '언어' },
                { key: 'serverType', label: '서버 타입' },
                { key: 'endpoint', label: '엔드포인트' },
                { key: 'serverPort', label: '서버 Port' },
                { key: 'useStatus', label: '사용 여부' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' }
            ]
        };

        // 폼 필드 정의
        const formFields = {
            service: [
                { name: 'name', label: '서비스명', type: 'text', required: true },
                { name: 'language', label: '언어 설정', type: 'radio', required: true, options: [
                    { value: 'ko', label: '한국어' },
                    { value: 'en', label: '영어' },
                    { value: 'zh', label: '중국어' },
                    { value: 'ja', label: '일본어' }
                ]},
                { name: 'tcsUsePhrase', label: '상용구 사용', type: 'checkbox' },
                { name: 'tcsUseCache', label: '캐시 사용', type: 'checkbox' },
                { name: 'sampleRate', label: 'Sample Rate', type: 'select', required: true, options: [
                    { value: '16000', label: '16 Khz' },
                    { value: '22050', label: '22 Khz' },
                    { value: '24000', label: '24 Khz' },
                    { value: '44100', label: '44 Khz' }
                ]},
                { name: 'bitPerSample', label: 'Bit Per Sample', type: 'select', required: true, options: [
                    { value: '8', label: '8 bit' },
                    { value: '16', label: '16 bit' },
                    { value: '24', label: '24 bit' }
                ]},
                { name: 'channel', label: 'Channel', type: 'select', required: true, options: [
                    { value: 'mono', label: 'Mono' },
                    { value: 'stereo', label: 'Stereo' }
                ]}
            ],
            speaker: [
                { name: 'speakerType', label: '스피커 종류', type: 'radio', required: true, options: [
                    { value: 'basic', label: '기본 스피커' },
                    { value: 'special', label: '특화 스피커' }
                ]},
                { name: 'speakerCode', label: '스피커 코드', type: 'text', required: true },
                { name: 'speakerId', label: '스피커 관리 ID', type: 'text', required: true },
                { name: 'emotion', label: '스피커 감정', type: 'text', required: true, defaultValue: '기본' },
                { name: 'service', label: '서비스', type: 'select', required: true, options: [
                    { value: 'tts', label: 'TTS (음성 합성 전용)' }
                ]},
                { name: 'modelVersion', label: '모델 버전명', type: 'text', required: true },
                { name: 'modelFile', label: '모델 파일(ZIP)', type: 'file', required: true }
            ],
            channel: [
                { name: 'serviceType', label: '서비스 타입', type: 'radio', required: true, options: [
                    { value: 'tts', label: 'TTS 채널' },
                    { value: 'stt', label: 'STT 채널' }
                ]},
                { name: 'name', label: '채널명', type: 'text', required: true },
                { name: 'channelId', label: '채널 관리 ID', type: 'text', required: true },
                { name: 'showStats', label: '요청통계 노출 여부', type: 'checkbox' }
            ],
            server: [
                { name: 'serviceType', label: '서비스 타입', type: 'radio', required: true, options: [
                    { value: 'tts', label: 'TTS 서버' },
                    { value: 'stt', label: 'STT 서버' }
                ]},
                { name: 'serverType', label: '서버 유형', type: 'radio', required: true, options: [
                    { value: 'tcs', label: 'TCS (TTS 전용)' },
                    { value: 'dse', label: 'DSE (STT 전용)' }
                ]},
                { name: 'name', label: '서버명', type: 'text', required: true },
                { name: 'serverId', label: '서버 ID', type: 'text', required: true },
                { name: 'endpoint', label: '엔드포인트', type: 'text', required: true },
                { name: 'port', label: 'Port', type: 'number', required: true },
                { name: 'useHttps', label: 'HTTPS 사용 여부', type: 'checkbox' },
                { name: 'useServer', label: '서버 사용 여부', type: 'checkbox' }
            ]
        };

        // 연결 관계 표시 함수
        // 연결 관계 표시 함수 (각 탭별로 다른 정보 표시)
        function showRelationships(tabType, itemName, item) {
            // 선택된 서비스명 찾기
            let selectedServiceName = '';
            if (tabType === 'services') {
                selectedServiceName = item.name;
            } else {
                selectedServiceName = item.service;
            }
            
            // 모든 탭의 status 업데이트
            updateAllTabStatus(selectedServiceName);
        }
        
        // 모든 탭의 상태 업데이트
        function updateAllTabStatus(serviceName) {
            // 서비스 탭: 선택된 서비스명 표시
            const servicesStatus = document.getElementById('services-status');
            if (servicesStatus) {
                servicesStatus.textContent = serviceName || '서비스 없음';
            }
            
            // 스피커 탭: 해당 서비스에 연결된 스피커 코드들 표시
            const speakersStatus = document.getElementById('speakers-status');
            if (speakersStatus) {
                const connectedSpeakers = sampleData.speakers.filter(s => s.service === serviceName);
                if (connectedSpeakers.length > 0) {
                    const speakerCodes = connectedSpeakers.map(s => s.speakerCode).join(', ');
                    speakersStatus.textContent = speakerCodes;
                } else {
                    speakersStatus.textContent = '연결된 스피커 없음';
                }
            }
            
            // 채널 탭: 해당 서비스에 연결된 채널명들 표시
            const channelsStatus = document.getElementById('channels-status');
            if (channelsStatus) {
                const connectedChannels = sampleData.channels.filter(c => c.service === serviceName);
                if (connectedChannels.length > 0) {
                    const channelNames = connectedChannels.map(c => c.channelName).join(', ');
                    channelsStatus.textContent = channelNames;
                } else {
                    channelsStatus.textContent = '연결된 채널 없음';
                }
            }
            
            // 서버 탭: 해당 서비스에 연결된 서버명들 표시
            const serversStatus = document.getElementById('servers-status');
            if (serversStatus) {
                const connectedServers = sampleData.servers.filter(s => s.service === serviceName);
                if (connectedServers.length > 0) {
                    const serverNames = connectedServers.map(s => s.serverName).join(', ');
                    serversStatus.textContent = serverNames;
                } else {
                    serversStatus.textContent = '연결된 서버 없음';
                }
            }
        }
        
        // 연결된 항목 이름 포맷팅 함수
        function formatRelatedItems(items, nameExtractor, maxDisplay = 3) {
            if (items.length <= maxDisplay) {
                return items.map(nameExtractor).join(', ');
            } else {
                const displayItems = items.slice(0, maxDisplay).map(nameExtractor);
                const remainingCount = items.length - maxDisplay;
                return `${displayItems.join(', ')} 외 ${remainingCount}개`;
            }
        }
        
        // 연결 관계 찾기 함수
        function findRelationships(tabType, item) {
            const relationships = {
                speakers: [],
                channels: [], 
                servers: [],
                service: null
            };
            
            if (tabType === 'services') {
                // 서비스 선택 시: 해당 서비스에 연결된 스피커, 채널, 서버 찾기
                const serviceName = item.name;
                
                relationships.speakers = sampleData.speakers.filter(s => s.service === serviceName);
                relationships.channels = sampleData.channels.filter(c => c.service === serviceName);
                relationships.servers = sampleData.servers.filter(s => s.service === serviceName);
                
            } else if (tabType === 'speakers') {
                // 스피커 선택 시: 소속 서비스와 관련 채널, 서버 찾기
                const serviceName = item.service;
                relationships.service = serviceName;
                
                relationships.channels = sampleData.channels.filter(c => c.service === serviceName);
                relationships.servers = sampleData.servers.filter(s => s.service === serviceName);
                
            } else if (tabType === 'channels') {
                // 채널 선택 시: 소속 서비스와 관련 스피커, 서버 찾기
                const serviceName = item.service;
                relationships.service = serviceName;
                
                relationships.speakers = sampleData.speakers.filter(s => s.service === serviceName);
                relationships.servers = sampleData.servers.filter(s => s.service === serviceName);
                
            } else if (tabType === 'servers') {
                // 서버 선택 시: 소속 서비스와 관련 스피커, 채널 찾기
                const serviceName = item.service;
                relationships.service = serviceName;
                
                relationships.speakers = sampleData.speakers.filter(s => s.service === serviceName);
                relationships.channels = sampleData.channels.filter(c => c.service === serviceName);
            }
            
            return relationships;
        }

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 서비스 탭을 기본으로 설정하고 명시적으로 호출
            switchTab('services');
        });

        // 탭 전환
        function switchTab(tabName) {
            currentTab = tabName;
            currentPage = 1;
            
            // 모든 탭 원형 버튼 비활성화
            document.querySelectorAll('.tab-circle').forEach(circle => {
                circle.classList.remove('active', 'completed');
                circle.classList.add('pending');
            });
            
            // 모든 탭 상태 비활성화
            document.querySelectorAll('.tab-status').forEach(status => {
                status.classList.remove('active', 'completed');
                status.classList.add('pending');
                status.textContent = '대기중';
            });
            
            // 선택된 탭 활성화
            const selectedCircle = document.getElementById(`tab-${tabName}`);
            const selectedStatus = document.getElementById(`${tabName}-status`);
            
            if (selectedCircle) {
                selectedCircle.classList.remove('pending');
                selectedCircle.classList.add('active');
            }
            
            if (selectedStatus) {
                selectedStatus.classList.remove('pending');
                selectedStatus.classList.add('active');
                selectedStatus.textContent = '활성';
            }
            
            // 진행률 업데이트
            updateTabProgress(tabName);
            
            // 상세 등록 버튼 텍스트 업데이트
            updateDetailRegisterButton();
            
            // 탭별 타이틀 업데이트
            updateTabTitle(tabName);
            
            // 탭별 문구 업데이트
            updateTabSubtitle(tabName);
            
            // 탭별 연결 정보 업데이트
            updateTabStatus(tabName);
            
            loadTabData();
            
            // 선택된 엔티티가 있으면 탭 라인 업데이트
            if (selectedEntity && selectedEntityType) {
                updateTabConnectionLines(selectedEntity, selectedEntityType);
            } else {
                hideAllTabConnectionLines();
            }
        }
        
        // 모든 탭 연결 라인 숨기기
        function hideAllTabConnectionLines() {
            document.querySelectorAll('.tab-connection-line').forEach(line => {
                line.classList.remove('active');
            });
        }
        
        // 탭 연결 라인 업데이트
        function updateTabConnectionLines(entityId, entityType) {
            // 모든 라인 숨기기
            hideAllTabConnectionLines();
            
            // 선택된 엔티티의 연결 정보 가져오기
            const connections = connectionData[entityType] && connectionData[entityType][entityId];
            if (!connections) return;
            
            // 각 탭과의 연결 상태에 따라 라인 표시
            Object.keys(connections).forEach(targetType => {
                const connectedIds = connections[targetType];
                if (connectedIds && connectedIds.length > 0) {
                    const lineId = `line-${entityType}-${targetType}`;
                    const line = document.getElementById(lineId);
                    if (line) {
                        line.classList.add('active');
                        // 라인 위치 설정
                        setTabConnectionLinePosition(line, entityType, targetType);
                    }
                }
            });
        }
        
        // 탭 연결 라인 위치 설정
        function setTabConnectionLinePosition(line, fromType, toType) {
            const tabNavigation = document.querySelector('.tab-navigation');
            const fromTab = document.getElementById(`tab-${fromType}`);
            const toTab = document.getElementById(`tab-${toType}`);
            
            if (!tabNavigation || !fromTab || !toTab) return;
            
            const navRect = tabNavigation.getBoundingClientRect();
            const fromRect = fromTab.getBoundingClientRect();
            const toRect = toTab.getBoundingClientRect();
            
            const fromCenter = fromRect.left + fromRect.width / 2 - navRect.left;
            const toCenter = toRect.left + toRect.width / 2 - navRect.left;
            
            const left = Math.min(fromCenter, toCenter);
            const width = Math.abs(toCenter - fromCenter);
            
            line.style.left = `${left}px`;
            line.style.width = `${width}px`;
        }
        
        // 엔티티 선택 함수 (테이블 행 클릭 시 호출)
        function selectEntity(entityId, entityType) {
            selectedEntity = entityId;
            selectedEntityType = entityType;
            
            // 선택된 행 하이라이트
            document.querySelectorAll('.data-table tbody tr').forEach(row => {
                row.classList.remove('selected');
            });
            
            const selectedRow = document.querySelector(`tr[data-id="${entityId}"]`);
            if (selectedRow) {
                selectedRow.classList.add('selected');
            }
            
            // 탭 연결 라인 업데이트
            updateTabConnectionLines(entityId, entityType);
        }
        
        // 탭 진행률 업데이트
        function updateTabProgress(tabName) {
            const tabIndex = ['services', 'speakers', 'channels', 'servers'].indexOf(tabName);
            const progressWidth = (tabIndex / 3) * 100; // 0%, 33.33%, 66.67%, 100%
            
            const tabFill = document.getElementById('tabFill');
            if (tabFill) {
                tabFill.style.width = `${progressWidth}%`;
            }
        }

        // 탭별 타이틀 업데이트
        function updateTabTitle(tabName) {
            const contentTitle = document.querySelector('.content-title');
            
            const tabTitles = {
                services: '서비스 목록',
                speakers: '스피커 목록',
                channels: '채널 목록',
                servers: '서버 목록'
            };
            
            if (contentTitle && tabTitles[tabName]) {
                contentTitle.textContent = tabTitles[tabName];
            }
        }

        // 탭별 문구 업데이트
        function updateTabSubtitle(tabName) {
            const contentSubtitle = document.querySelector('.content-subtitle');
            
            const tabSubtitles = {
                services: '등록된 서비스 목록을 확인하고 등록 할 수 있습니다.',
                speakers: '등록된 스피커 목록을 확인하고 등록할 수 있습니다.',
                channels: '등록된 채널 목록을 확인하고 등록할 수 있습니다.',
                servers: '등록된 서버 목록을 확인하고 등록할 수 있습니다.'
            };
            
            if (contentSubtitle && tabSubtitles[tabName]) {
                contentSubtitle.textContent = tabSubtitles[tabName];
            }
        }

        // 탭별 연결 정보 업데이트
        function updateTabStatus(tabName) {
            // 모든 탭의 상태를 기본값으로 초기화
            const allTabs = ['services', 'speakers', 'channels', 'servers'];
            allTabs.forEach(tab => {
                const statusElement = document.getElementById(`${tab}-status`);
                if (statusElement) {
                    statusElement.textContent = '대기중';
                    statusElement.className = 'tab-status pending';
                }
            });

            // 현재 탭의 상태를 활성으로 설정
            const currentStatusElement = document.getElementById(`${tabName}-status`);
            if (currentStatusElement) {
                currentStatusElement.className = 'tab-status active';
                
                // 연결 정보 계산
                const connectionInfo = getTabConnectionInfo(tabName);
                currentStatusElement.textContent = connectionInfo;
            }
        }

        // 탭별 연결 정보 계산
        function getTabConnectionInfo(tabName) {
            let connectionInfo = '';
            
            if (tabName === 'services') {
                // 서비스 탭: 전체 서비스 수와 연결된 항목들
                const totalServices = sampleData.services.length;
                const totalSpeakers = sampleData.speakers.length;
                const totalChannels = sampleData.channels.length;
                const totalServers = sampleData.servers.length;
                
                connectionInfo = `서비스:${totalServices} 스피커:${totalSpeakers} 채널:${totalChannels} 서버:${totalServers}`;
                
            } else if (tabName === 'speakers') {
                // 스피커 탭: 스피커 수와 연결된 서비스
                const totalSpeakers = sampleData.speakers.length;
                const connectedServices = [...new Set(sampleData.speakers.map(s => s.service))].length;
                
                connectionInfo = `스피커:${totalSpeakers} 서비스:${connectedServices}`;
                
            } else if (tabName === 'channels') {
                // 채널 탭: 채널 수와 연결된 서비스
                const totalChannels = sampleData.channels.length;
                const connectedServices = [...new Set(sampleData.channels.map(c => c.service))].length;
                
                connectionInfo = `채널:${totalChannels} 서비스:${connectedServices}`;
                
            } else if (tabName === 'servers') {
                // 서버 탭: 서버 수와 연결된 서비스
                const totalServers = sampleData.servers.length;
                const connectedServices = [...new Set(sampleData.servers.map(s => s.service))].length;
                
                connectionInfo = `서버:${totalServers} 서비스:${connectedServices}`;
            }
            
            return connectionInfo;
        }

        // 상세 등록 버튼 텍스트 업데이트
        function updateDetailRegisterButton() {
            const detailRegisterText = document.getElementById('detailRegisterText');
            const deployBtn = document.getElementById('deployBtn');
            
            const tabNames = {
                services: '서비스 등록',
                speakers: '스피커 등록',
                channels: '채널 등록',
                servers: '서버 등록'
            };
            
            if (detailRegisterText) {
                detailRegisterText.textContent = tabNames[currentTab] || '항목 등록';
            }
            
            // 배포 버튼은 모든 탭에서 표시 (탭별로 다른 텍스트)
            if (deployBtn) {
                deployBtn.style.display = 'block';
                
                const deployTexts = {
                    services: '서비스 배포 (패치)',
                    speakers: '스피커 배포',
                    channels: '채널 배포',
                    servers: '서버 배포'
                };
                
                deployBtn.querySelector('#deployBtnText').textContent = deployTexts[currentTab] || '배포';
            }
        }

        // 탭 데이터 로드
        function loadTabData() {
            showLoading(true);
            
            setTimeout(() => {
                currentData = sampleData[currentTab] || [];
                renderTable();
                renderPagination();
                showLoading(false);
            }, 500);
        }

        // 테이블 렌더링
        function renderTable() {
            const columns = tableColumns[currentTab];
            const tableHead = document.getElementById('tableHead');
            const tableBody = document.getElementById('tableBody');
            
            // 헤더 생성
            tableHead.innerHTML = `
                <tr>
                    ${columns.map(col => {
                        if (col.type === 'checkbox') {
                            return `<th><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>`;
                        } else {
                            return `<th>${col.label}</th>`;
                        }
                    }).join('')}
                </tr>
            `;
            
            // 바디 생성
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = currentData.slice(startIndex, endIndex);
            
            tableBody.innerHTML = pageData.map((item, index) => {
                // 엔티티 ID 생성 (실제 구현에서는 고유 ID를 사용해야 함)
                const entityId = item.no || item.id || item.speakerCode || item.channelName || item.serverName;
                return `
                <tr data-id="${entityId}" onclick="selectEntity('${entityId}', '${currentTab}')" style="cursor: pointer;">
                    ${columns.map(col => {
                        if (col.type === 'checkbox') {
                            return `<td onclick="event.stopPropagation()"><input type="checkbox" class="row-checkbox" data-id="${item.no || item.id}"></td>`;
                        } else if (col.type === 'status') {
                            return `<td><span class="status-badge status-${item[col.key]}">${getStatusLabel(item[col.key])}</span></td>`;
                        } else if (col.type === 'actions') {
                            return `
                                <td onclick="event.stopPropagation()">
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editItem('${item.id}')">
                                            <i class="fas fa-edit"></i> 수정
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="deleteItem('${item.id}')">
                                            <i class="fas fa-trash"></i> 삭제
                                        </button>
                                        ${currentTab === 'services' && item.deployStatus === '배포완료' ? `
                                        <button class="btn btn-success btn-sm" onclick="deployService('${item.name}')">
                                            <i class="fas fa-rocket"></i> 재배포
                                        </button>
                                        ` : ''}
                                        ${currentTab === 'services' && item.deployStatus === '배포대기' && hasAllComponents(item) ? `
                                        <button class="btn btn-warning btn-sm" onclick="deployService('${item.name}')">
                                            <i class="fas fa-play"></i> 배포
                                        </button>
                                        ` : ''}
                                    </div>
                                </td>
                            `;
                        } else if (col.key === 'deployStatus') {
                            const statusClass = item[col.key] === '배포완료' ? 'success' : item[col.key] === '배포대기' ? 'warning' : 'secondary';
                            return `<td><span class="status-badge status-${statusClass}">${item[col.key] || '-'}</span></td>`;
                        } else if (col.key === 'connectedItems') {
                            return `<td><small style="color: #6b7280;">${item[col.key] || '-'}</small></td>`;
                        } else {
                            return `<td>${item[col.key] || '-'}</td>`;
                        }
                    }).join('')}
                </tr>
            `).join('');
        }

        // 페이지네이션 렌더링
        function renderPagination() {
            const totalPages = Math.ceil(currentData.length / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let paginationHtml = `
                <button class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left"></i>
                </button>
            `;
            
            for (let i = 1; i <= totalPages; i++) {
                paginationHtml += `
                    <button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
                        ${i}
                    </button>
                `;
            }
            
            paginationHtml += `
                <button class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                    <i class="fas fa-chevron-right"></i>
                </button>
            `;
            
            pagination.innerHTML = paginationHtml;
        }

        // 페이지 변경
        function changePage(page) {
            const totalPages = Math.ceil(currentData.length / itemsPerPage);
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            renderTable();
            renderPagination();
        }

        // 상태 라벨 변환
        function getStatusLabel(status) {
            const statusLabels = {
                active: '활성',
                inactive: '비활성',
                online: '온라인',
                offline: '오프라인',
                running: '실행중',
                stopped: '중지됨',
                maintenance: '점검중'
            };
            return statusLabels[status] || status;
        }

        // 통계 업데이트 (연결 관계 표시로 대체됨)
        function updateStats() {
            // 연결 관계 표시 기능으로 대체됨
            // 필요시 개별 카운트는 연결 관계에서 표시
        }

        // 로딩 표시
        function showLoading(show) {
            const loading = document.getElementById('loading');
            const tableContainer = document.getElementById('tableContainer');
            
            if (show) {
                loading.classList.add('show');
                tableContainer.style.display = 'none';
            } else {
                loading.classList.remove('show');
                tableContainer.style.display = 'block';
            }
        }

        // 빠른 배포등록 모달 관련 변수
        let quickCurrentStep = 1;

        // 빠른 배포등록 모달 열기
        function openQuickDeployModal() {
            document.getElementById('quickDeployModal').style.display = 'block';
            quickCurrentStep = 1;
            updateQuickWizardStep();
            generateQuickAutoValues();
        }

        // 빠른 배포등록 모달 닫기
        function closeQuickDeployModal() {
            document.getElementById('quickDeployModal').style.display = 'none';
            resetQuickWizardForm();
        }

        function generateQuickAutoValues() {
            const serviceName = document.getElementById('quickServiceName').value || '새서비스';
            const timestamp = Date.now().toString().slice(-4);
            
            document.getElementById('quickServerName').placeholder = `TCS-${serviceName}-${timestamp}`;
            document.getElementById('quickServerId').placeholder = `tcs_${serviceName.toLowerCase()}_${timestamp}`;
            document.getElementById('quickServerPort').placeholder = `${16790 + sampleData.services.length + 1}`;
        }

        function quickNextStep() {
            if (validateQuickCurrentStep()) {
                if (quickCurrentStep < 4) {
                    quickCurrentStep++;
                    updateQuickWizardStep();
                    
                    if (quickCurrentStep === 2) {
                        generateQuickAutoValues();
                    } else if (quickCurrentStep === 4) {
                        generateQuickSummary();
                    }
                }
            }
        }

        function quickPreviousStep() {
            if (quickCurrentStep > 1) {
                quickCurrentStep--;
                updateQuickWizardStep();
            }
        }

        function updateQuickWizardStep() {
            // Update step indicators
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`quickStep${i}`);
                const wizardStep = document.getElementById(`quickWizardStep${i}`);
                
                if (i < quickCurrentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (i === quickCurrentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
                
                wizardStep.style.display = i === quickCurrentStep ? 'block' : 'none';
            }

            // Update buttons
            const prevBtn = document.getElementById('quickPrevBtn');
            const nextBtn = document.getElementById('quickNextBtn');
            const createBtn = document.getElementById('quickCreateBtn');

            prevBtn.style.display = quickCurrentStep > 1 ? 'inline-flex' : 'none';
            nextBtn.style.display = quickCurrentStep < 4 ? 'inline-flex' : 'none';
            createBtn.style.display = quickCurrentStep === 4 ? 'inline-flex' : 'none';
        }

        function validateQuickCurrentStep() {
            switch (quickCurrentStep) {
                case 1:
                    const serviceName = document.getElementById('quickServiceName').value;
                    const serviceLanguage = document.getElementById('quickServiceLanguage').value;
                    const sampleRate = document.getElementById('quickSampleRate').value;
                    const bitPerSample = document.getElementById('quickBitPerSample').value;
                    const audioChannel = document.getElementById('quickAudioChannel').value;

                    if (!serviceName || !serviceLanguage || !sampleRate || !bitPerSample || !audioChannel) {
                        alert('필수 항목을 모두 입력해주세요.');
                        return false;
                    }
                    return true;

                case 2:
                    const serverName = document.getElementById('quickServerName').value;
                    const serverId = document.getElementById('quickServerId').value;
                    const serverEndpoint = document.getElementById('quickServerEndpoint').value;
                    const serverPort = document.getElementById('quickServerPort').value;

                    if (!serverName || !serverId || !serverEndpoint || !serverPort) {
                        alert('서버 설정을 모두 입력해주세요.');
                        return false;
                    }
                    return true;

                case 3:
                    // 배포 설정 단계는 검증 없이 통과
                    return true;

                default:
                    return true;
            }
        }

        function generateQuickSummary() {
            const serviceName = document.getElementById('quickServiceName').value;
            const serviceLanguage = document.getElementById('quickServiceLanguage').value;
            const serverName = document.getElementById('quickServerName').value || document.getElementById('quickServerName').placeholder;
            const serverId = document.getElementById('quickServerId').value || document.getElementById('quickServerId').placeholder;
            const serverPort = document.getElementById('quickServerPort').value || document.getElementById('quickServerPort').placeholder;


            const summaryHtml = `
                <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                    <h5 style="margin-bottom: 16px; color: #1a202c;">생성될 서비스 정보</h5>
                    <div style="display: grid; gap: 12px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">서비스명:</span>
                            <strong>${serviceName}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">언어:</span>
                            <strong>${serviceLanguage}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">전용 서버:</span>
                            <strong>${serverName}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">서버 ID:</span>
                            <strong>${serverId}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">엔드포인트:</span>
                            <strong>localhost:${serverPort}</strong>
                        </div>

                    </div>
                </div>
                <div style="margin-top: 20px; padding: 16px; background: #f0fff4; border-radius: 8px; border-left: 4px solid #48bb78;">
                    <p style="margin: 0; color: #2d3748;">
                        <i class="fas fa-info-circle" style="color: #48bb78; margin-right: 8px;"></i>
                        서비스 생성과 동시에 전용 서버가 자동으로 생성되고 배포됩니다.
                    </p>
                </div>
            `;

            document.getElementById('quickCreationSummary').innerHTML = summaryHtml;
        }

        function quickCreateService() {
            const serviceName = document.getElementById('quickServiceName').value;
            const serviceLanguage = document.getElementById('quickServiceLanguage').value;
            const serverName = document.getElementById('quickServerName').value || document.getElementById('quickServerName').placeholder;
            const serverId = document.getElementById('quickServerId').value || document.getElementById('quickServerId').placeholder;
            const serverPort = document.getElementById('quickServerPort').value || document.getElementById('quickServerPort').placeholder;

            const sampleRate = document.getElementById('quickSampleRate').value;
            const bitPerSample = document.getElementById('quickBitPerSample').value;
            const audioChannel = document.getElementById('quickAudioChannel').value;

            // 서비스 데이터에 추가
            const newService = {
                no: sampleData.services.length + 1,
                name: serviceName,
                language: serviceLanguage,
                sampleRate: sampleRate + ' Hz',
                bitPerSample: bitPerSample + ' Bit',
                channel: audioChannel,
                phraseUse: document.getElementById('quickEnablePhrase').checked ? 'Y' : 'N',
                cacheUse: document.getElementById('quickEnableCache').checked ? 'Y' : 'N',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };

            // 서버 데이터에 추가
            const newServer = {
                no: sampleData.servers.length + 1,
                serverName: serverName,
                serverId: serverId,
                service: serviceName,
                language: serviceLanguage,
                serverType: 'TCS',
                endpoint: 'localhost',
                serverPort: serverPort,
                useStatus: 'Y',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };

            sampleData.services.push(newService);
            sampleData.servers.push(newServer);
            
            // 현재 탭이 서비스면 새로고침
            if (currentTab === 'services') {
                loadTabData();
            }
            
            updateStats();
            closeQuickDeployModal();

            alert(`TTS 서비스가 성공적으로 생성되었습니다!\n\n서비스명: ${serviceName}\n전용 서버: ${serverName}\n상태: ${autoStart ? '배포 완료' : '배포 대기'}`);
        }

        function resetQuickWizardForm() {
            quickCurrentStep = 1;
            document.getElementById('quickServiceName').value = '';
            document.getElementById('quickServiceLanguage').value = '';
            document.getElementById('quickServiceDescription').value = '';
            document.getElementById('quickServerName').value = '';
            document.getElementById('quickServerId').value = '';
            document.getElementById('quickServerPort').value = '';
            document.getElementById('quickDeployEnvironment').value = '';
            document.getElementById('quickDeployType').value = '';
            updateQuickWizardStep();
        }

        // 상세 모달 열기
        function openDetailModal() {
            const detailModal = document.getElementById('detailModal');
            const detailModalTitle = document.getElementById('detailModalTitle');
            
            const tabTitles = {
                services: '서비스 등록',
                speakers: '스피커 등록',
                channels: '채널 등록',
                servers: '서버 등록'
            };
            
            detailModalTitle.textContent = tabTitles[currentTab] || '항목 등록';
            updateDetailFormFields();
            detailModal.style.display = 'block';
        }

        // 상세 모달 닫기
        function closeDetailModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        // 상세 폼 필드 업데이트
        function updateDetailFormFields() {
            const detailFields = document.getElementById('detailFields');
            
            if (!currentTab) {
                detailFields.innerHTML = '';
                return;
            }
            
            const fields = formFields[currentTab];
            detailFields.innerHTML = fields.map(field => {
                const required = field.required ? '<span class="required">*</span>' : '';
                let inputHtml = '';
                
                switch (field.type) {
                    case 'text':
                    case 'number':
                        inputHtml = `<input type="${field.type}" class="form-control" id="detail_${field.name}" ${field.required ? 'required' : ''} ${field.defaultValue ? `value="${field.defaultValue}"` : ''}>`;
                        break;
                    case 'textarea':
                        inputHtml = `<textarea class="form-control" id="detail_${field.name}" rows="3"></textarea>`;
                        break;
                    case 'select':
                        const options = field.options ? field.options.map(opt => 
                            `<option value="${opt.value}">${opt.label}</option>`
                        ).join('') : '';
                        inputHtml = `
                            <select class="form-select" id="detail_${field.name}" ${field.required ? 'required' : ''}>
                                <option value="">선택하세요</option>
                                ${options}
                            </select>
                        `;
                        break;
                    case 'radio':
                        const radioOptions = field.options ? field.options.map((opt, index) => 
                            `<label class="radio-label">
                                <input type="radio" name="detail_${field.name}" value="${opt.value}" ${index === 0 ? 'checked' : ''} ${field.required ? 'required' : ''}>
                                ${opt.label}
                            </label>`
                        ).join('') : '';
                        inputHtml = `<div class="radio-group">${radioOptions}</div>`;
                        break;
                    case 'checkbox':
                        inputHtml = `
                            <label class="checkbox-label">
                                <input type="checkbox" id="detail_${field.name}" value="1">
                                ${field.label}
                            </label>
                        `;
                        break;
                    case 'file':
                        inputHtml = `<input type="file" class="form-control" id="detail_${field.name}" accept=".zip" ${field.required ? 'required' : ''}>`;
                        break;
                }
                
                return `
                    <div class="form-group">
                        <label class="form-label">${field.label} ${required}</label>
                        ${inputHtml}
                    </div>
                `;
            }).join('');
        }

        // 상세 항목 저장
        function saveDetailItem() {
            const fields = formFields[currentTab];
            const newItem = {
                no: sampleData[currentTab].length + 1,
                regDate: new Date().toISOString().split('T')[0] + ' ' + new Date().toTimeString().split(' ')[0],
                updateDate: new Date().toISOString().split('T')[0] + ' ' + new Date().toTimeString().split(' ')[0]
            };
            
            // 필드 값 수집
            for (const field of fields) {
                const element = document.getElementById(`detail_${field.name}`);
                if (element) {
                    if (field.type === 'radio') {
                        const radioElement = document.querySelector(`input[name="detail_${field.name}"]:checked`);
                        if (radioElement) {
                            newItem[field.name] = radioElement.value;
                        } else if (field.required) {
                            alert(`${field.label}을(를) 선택해주세요.`);
                            return;
                        }
                    } else if (field.type === 'checkbox') {
                        newItem[field.name] = element.checked ? 'Y' : 'N';
                    } else {
                        if (field.required && !element.value.trim()) {
                            alert(`${field.label}을(를) 입력해주세요.`);
                            return;
                        }
                        newItem[field.name] = element.value;
                    }
                }
            }
            
            // 데이터 추가
            sampleData[currentTab].push(newItem);
            
            // UI 업데이트
            loadTabData();
            updateStats();
            closeDetailModal();
            
            alert('항목이 성공적으로 등록되었습니다.');
        }

        // 폼 필드 업데이트
        function updateFormFields() {
            const itemType = document.getElementById('itemType').value;
            const dynamicFields = document.getElementById('dynamicFields');
            
            if (!itemType) {
                dynamicFields.innerHTML = '';
                return;
            }
            
            const fields = formFields[itemType];
            dynamicFields.innerHTML = fields.map(field => {
                const required = field.required ? '<span class="required">*</span>' : '';
                let inputHtml = '';
                
                switch (field.type) {
                    case 'text':
                    case 'number':
                        inputHtml = `<input type="${field.type}" class="form-control" id="${field.name}" ${field.required ? 'required' : ''} ${field.defaultValue ? `value="${field.defaultValue}"` : ''}>`;
                        break;
                    case 'textarea':
                        inputHtml = `<textarea class="form-control" id="${field.name}" rows="3"></textarea>`;
                        break;
                    case 'select':
                        const options = field.options ? field.options.map(opt => 
                            `<option value="${opt.value}">${opt.label}</option>`
                        ).join('') : '';
                        inputHtml = `
                            <select class="form-select" id="${field.name}" ${field.required ? 'required' : ''}>
                                <option value="">선택하세요</option>
                                ${options}
                            </select>
                        `;
                        break;
                    case 'radio':
                        const radioOptions = field.options ? field.options.map((opt, index) => 
                            `<label class="radio-label">
                                <input type="radio" name="${field.name}" value="${opt.value}" ${index === 0 ? 'checked' : ''} ${field.required ? 'required' : ''}>
                                ${opt.label}
                            </label>`
                        ).join('') : '';
                        inputHtml = `<div class="radio-group">${radioOptions}</div>`;
                        break;
                    case 'checkbox':
                        inputHtml = `
                            <label class="checkbox-label">
                                <input type="checkbox" id="${field.name}" value="1">
                                ${field.label}
                            </label>
                        `;
                        break;
                    case 'file':
                        inputHtml = `<input type="file" class="form-control" id="${field.name}" accept=".zip" ${field.required ? 'required' : ''}>`;
                        break;
                }
                
                return `
                    <div class="form-group">
                        <label class="form-label">${field.label} ${required}</label>
                        ${inputHtml}
                    </div>
                `;
            }).join('');
        }

        // 항목 저장
        function saveItem() {
            const itemType = document.getElementById('itemType').value;
            if (!itemType) {
                alert('항목 타입을 선택해주세요.');
                return;
            }
            
            const fields = formFields[itemType];
            const newItem = {
                id: generateId(itemType),
                regDate: new Date().toISOString().split('T')[0]
            };
            
            // 필드 값 수집
            for (const field of fields) {
                const element = document.getElementById(field.name);
                if (element) {
                    if (field.required && !element.value.trim()) {
                        alert(`${field.label}을(를) 입력해주세요.`);
                        return;
                    }
                    newItem[field.name] = element.value;
                }
            }
            
            // 데이터 추가
            sampleData[itemType + 's'].push(newItem);
            
            // UI 업데이트
            if (currentTab === itemType + 's') {
                loadTabData();
            }
            updateStats();
            closeUnifiedModal();
            
            alert('항목이 성공적으로 등록되었습니다.');
        }

        // ID 생성
        function generateId(type) {
            const prefixes = {
                service: 'SVC',
                speaker: 'SPK',
                channel: 'CHN',
                server: 'SVR'
            };
            const prefix = prefixes[type];
            const count = sampleData[type + 's'].length + 1;
            return prefix + String(count).padStart(3, '0');
        }

        // 항목 편집
        function editItem(id) {
            alert(`편집 기능: ${id}`);
        }

        // 항목 삭제
        function deleteItem(id) {
            if (confirm('정말로 이 항목을 삭제하시겠습니까?')) {
                const dataKey = currentTab;
                const index = sampleData[dataKey].findIndex(item => item.id === id);
                if (index > -1) {
                    sampleData[dataKey].splice(index, 1);
                    loadTabData();
                    updateStats();
                    alert('항목이 삭제되었습니다.');
                }
            }
        }

        // 검색
        function performSearch() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
            if (!searchTerm.trim()) {
                loadTabData();
                return;
            }
            
            const filtered = sampleData[currentTab].filter(item => 
                Object.values(item).some(value => 
                    String(value).toLowerCase().includes(searchTerm)
                )
            );
            
            currentData = filtered;
            currentPage = 1;
            renderTable();
            renderPagination();
        }

        // 검색 초기화
        function resetSearch() {
            document.getElementById('globalSearch').value = '';
            loadTabData();
        }

        // 모달 외부 클릭시 닫기
        // 배포 모달 관련 함수들
        function openDeployModal() {
            const deployModal = document.getElementById('deployModal');
            const deployModalTitle = document.getElementById('deployModalTitle');
            
            const modalTitles = {
                services: 'TTS 서비스 배포 (패치)',
                speakers: '스피커 배포',
                channels: '채널 배포',
                servers: '서버 배포'
            };
            
            deployModalTitle.textContent = modalTitles[currentTab] || '배포';
            updateDeployItems();
            deployModal.style.display = 'block';
        }

        function closeDeployModal() {
            document.getElementById('deployModal').style.display = 'none';
        }

        function updateDeployItems() {
            const deployItems = document.getElementById('deployItems');
            const currentData = sampleData[currentTab] || [];
            
            if (currentData.length === 0) {
                deployItems.innerHTML = '<div style="text-align: center; padding: 20px; color: #6b7280;">배포 가능한 항목이 없습니다.</div>';
                return;
            }
            
            deployItems.innerHTML = currentData.map(item => `
                <div class="deploy-item" onclick="toggleDeployItem(this, ${item.no || item.id})">
                    <input type="checkbox" class="deploy-checkbox" data-id="${item.no || item.id}">
                    <div class="deploy-item-info">
                        <div class="deploy-item-name">${item.name || item.serverName || item.channelName || item.speakerCode}</div>
                        <div class="deploy-item-details">
                            ${currentTab === 'services' ? `언어: ${item.language}, 타입: TTS` : 
                              currentTab === 'speakers' ? `타입: ${item.speakerType}, 서비스: ${item.service}` :
                              currentTab === 'channels' ? `ID: ${item.channelId}, 서비스: ${item.service}` :
                              `ID: ${item.serverId}, 타입: ${item.serverType}`}
                        </div>
                    </div>
                    <div class="deploy-item-status ready">배포 준비</div>
                </div>
            `).join('');
        }

        function toggleDeployItem(element, id) {
            const checkbox = element.querySelector('.deploy-checkbox');
            checkbox.checked = !checkbox.checked;
            element.classList.toggle('selected', checkbox.checked);
        }

        function validateDeployment() {
            const selectedItems = document.querySelectorAll('.deploy-checkbox:checked');
            const environment = document.getElementById('deployEnvironment').value;
            const deployType = document.getElementById('deployType').value;
            
            if (selectedItems.length === 0) {
                alert('배포할 항목을 선택해주세요.');
                return;
            }
            
            if (!environment || !deployType) {
                alert('배포 환경과 배포 유형을 선택해주세요.');
                return;
            }
            
            const itemNames = Array.from(selectedItems).map(cb => {
                const item = cb.closest('.deploy-item');
                return item.querySelector('.deploy-item-name').textContent;
            });
            
            alert(`배포 검증 완료!\n\n선택된 항목: ${itemNames.join(', ')}\n배포 환경: ${environment}\n배포 유형: ${deployType}\n\n배포를 진행하시겠습니까?`);
        }

        function startDeployment() {
            const selectedItems = document.querySelectorAll('.deploy-checkbox:checked');
            const environment = document.getElementById('deployEnvironment').value;
            const deployType = document.getElementById('deployType').value;
            const targetServer = document.getElementById('deployTargetServer').value;
            const instances = document.getElementById('deployInstances').value;
            
            if (selectedItems.length === 0) {
                alert('배포할 항목을 선택해주세요.');
                return;
            }
            
            if (!environment || !deployType) {
                alert('배포 환경과 배포 유형을 선택해주세요.');
                return;
            }
            
            const deployData = {
                items: Array.from(selectedItems).map(cb => cb.dataset.id),
                environment: environment,
                deployType: deployType,
                targetServer: targetServer || 'auto',
                instances: parseInt(instances),
                healthCheck: document.getElementById('deployHealthCheck').checked,
                rollback: document.getElementById('deployRollback').checked,
                notification: document.getElementById('deployNotification').checked
            };
            
            console.log('배포 시작:', deployData);
            
            // 패치 시뮬레이션
            alert('TTS 서비스 패치가 시작되었습니다.\n\n패치 진행 상황은 시스템 로그에서 확인할 수 있습니다.');
            
            // 패치 진행 시뮬레이션
            setTimeout(() => {
                if (deployData.notification) {
                    alert(`TTS 서비스 패치가 성공적으로 완료되었습니다!\n\n패치된 서비스: ${selectedItems.length}개\n환경: ${environment}\nTCS 서버: ${deployData.targetServer}`);
                }
                closeDeployModal();
            }, 2000);
        }

        window.onclick = function(event) {
            const quickDeployModal = document.getElementById('quickDeployModal');
            const detailModal = document.getElementById('detailModal');
            const deployModal = document.getElementById('deployModal');
            
            if (event.target === quickDeployModal) {
                closeQuickDeployModal();
            } else if (event.target === detailModal) {
                closeDetailModal();
            } else if (event.target === deployModal) {
                closeDeployModal();
            }
        }

        // 상세 관리 화면으로 이동
        function goToDetailView() {
            window.location.href = 'amp-basic-data-detail.html';
        }

        // 서비스명 입력 시 자동 값 생성
        document.addEventListener('DOMContentLoaded', function() {
            const quickServiceNameInput = document.getElementById('quickServiceName');
            if (quickServiceNameInput) {
                quickServiceNameInput.addEventListener('input', function() {
                    if (quickCurrentStep === 2) {
                        generateQuickAutoValues();
                    }
                });
            }
        });

        // Enter 키로 검색
        document.getElementById('globalSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // 전체 선택/해제
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.row-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
        }

        // 선택된 항목 삭제
        function deleteSelected() {
            const selectedCheckboxes = document.querySelectorAll('.row-checkbox:checked');
            const selectedIds = Array.from(selectedCheckboxes).map(cb => cb.dataset.id);
            
            if (selectedIds.length === 0) {
                alert('삭제할 항목을 선택해주세요.');
                return;
            }
            
            if (confirm(`선택된 ${selectedIds.length}개 항목을 삭제하시겠습니까?`)) {
                // 실제 삭제 로직 구현
                selectedIds.forEach(id => {
                    const index = sampleData[currentTab].findIndex(item => (item.no || item.id) == id);
                    if (index > -1) {
                        sampleData[currentTab].splice(index, 1);
                    }
                });
                
                loadTabData();
                updateStats();
                alert(`${selectedIds.length}개 항목이 삭제되었습니다.`);
            }
        }

        // 서비스 연결 관리 모달 열기
        function openConnectModal() {
            console.log('연결하기 버튼 클릭됨');
            const modal = document.getElementById('connectModal');
            console.log('모달 요소:', modal);
            if (modal) {
                modal.style.display = 'block';
                console.log('모달 표시됨');
            } else {
                console.error('connectModal 요소를 찾을 수 없습니다');
            }
        }

        // 서비스 연결 관리 모달 닫기
        function closeConnectModal() {
            document.getElementById('connectModal').style.display = 'none';
        }

        // 배포 관련 함수들
        function hasAllComponents(service) {
            const serviceName = service.name;
            const speakers = sampleData.speakers.filter(item => item.service === serviceName);
            const channels = sampleData.channels.filter(item => item.service === serviceName);
            const servers = sampleData.servers.filter(item => item.service === serviceName);
            
            return speakers.length > 0 && channels.length > 0 && servers.length > 0;
        }

        function deployService(serviceName) {
            const service = sampleData.services.find(item => item.name === serviceName);
            if (!service) {
                alert('서비스를 찾을 수 없습니다.');
                return;
            }

            if (!hasAllComponents(service)) {
                const speakers = sampleData.speakers.filter(item => item.service === serviceName);
                const channels = sampleData.channels.filter(item => item.service === serviceName);
                const servers = sampleData.servers.filter(item => item.service === serviceName);
                
                let missing = [];
                if (speakers.length === 0) missing.push('스피커');
                if (channels.length === 0) missing.push('채널');
                if (servers.length === 0) missing.push('서버');
                
                alert(`배포할 수 없습니다. 다음 구성 요소가 필요합니다: ${missing.join(', ')}`);
                return;
            }

            if (confirm(`'${serviceName}' 서비스를 배포하시겠습니까?`)) {
                // 배포 시뮬레이션
                service.deployStatus = '배포완료';
                loadTabData();
                alert(`'${serviceName}' 서비스가 성공적으로 배포되었습니다.`);
            }
        }

        function showDeployOverview() {
            let overview = '=== 배포 가능 서비스 현황 ===\\n\\n';
            
            sampleData.services.forEach(service => {
                const speakers = sampleData.speakers.filter(item => item.service === service.name);
                const channels = sampleData.channels.filter(item => item.service === service.name);
                const servers = sampleData.servers.filter(item => item.service === service.name);
                
                overview += `${service.name}:\\n`;
                overview += `  - 배포 상태: ${service.deployStatus}\\n`;
                overview += `  - 스피커: ${speakers.length}개\\n`;
                overview += `  - 채널: ${channels.length}개\\n`;
                overview += `  - 서버: ${servers.length}개\\n`;
                overview += `  - 배포 가능: ${hasAllComponents(service) ? 'YES' : 'NO'}\\n\\n`;
            });
            
            alert(overview);
        }
    </script>
</body>
</html>
